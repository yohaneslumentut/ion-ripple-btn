{"version":3,"file":"ripple-btn.directive.js","sourceRoot":"","sources":["../src/ripple-btn.directive.ts"],"names":[],"mappings":"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","sourcesContent":["import { Directive, ElementRef, Input, Output, Renderer, EventEmitter, HostBinding } from '@angular/core';\n\n@Directive({\n  selector: '[ripple-btn]', // Attribute selector\n  host: {\n    '(touchstart)': 'onTouchstart($event)',\n    '(touchend)': 'onTouchend($event)'\n  }\n})\nexport class RippleBtnDirective {\n\n  // Elements\n  el: HTMLElement\n  wrapper: any\n  container: any\n  event: any\n\n  // Dimensions\n  containerHeight: number\n\n  // Status\n  isActive: boolean = false\n  isTapping: boolean = false\n  isAnimating: boolean = false\n  pressTimeoutRunning: boolean = false\n\n  // Timing\n  startTimeStamp: number = 0;\n  endTimeStamp: number = 0;\n  pressTimeout: any\n  fadeDuration: 400\n  delay: any\n\n  // Styling\n  @HostBinding('style.height') height: string\n  @HostBinding('style.width') width: string\n  @HostBinding('style.backgroundColor') backgroundColor: string\n  @HostBinding('style.marginTop') marginTop: string\n\n  // Host input\n  @Input() interval: number;\n  @Input() size: number\n  @Input() containerClass: string\n  @Input() wrapperClass: string\n  @Input() tooltipText: string\n\n  @Input()\n  set darken(val:boolean) {\n    this._darken = typeof val !== 'boolean' || val != true\n  }\n  get darken(): boolean { return this._darken }\n\n  @Output() btnTapped: EventEmitter<any> = new EventEmitter();\n  @Output() btnPressed: EventEmitter<any> = new EventEmitter();\n  @Output() btnPressup: EventEmitter<any> = new EventEmitter();\n\n  private _darken: boolean = false\n  private activeBackgroundColor: string\n  private nonactiveBackgroundColor: string\n  private rippleBackground: string\n\n  constructor( el: ElementRef, private renderer: Renderer) {\n    this.el = el.nativeElement;\n    this.delay = (ms:number) => new Promise(_ => setTimeout(_, ms));\n  }\n\n  ngAfterViewInit() {\n    this.getWrapperAndContainer();\n    this.setBackgroundColor();\n    this.setDimensions();\n  }\n\n  getWrapperAndContainer() {\n    this.wrapper = this.el.children[0].closest('.'+ this.wrapperClass);\n    this.container = this.el.children[0].closest('.' + this.containerClass);\n    this.containerHeight = this.container.offsetHeight;\n  }\n\n  setBackgroundColor() {\n    this.activeBackgroundColor = this.darken ? 'rgba(0,0,0,0.1)' : 'rgba(255,255,255,0.15)';\n    this.nonactiveBackgroundColor = this.darken ? 'rgba(0,0,0,0)' : 'rgba(255,255,255,0)';\n    this.rippleBackground = this.darken ?  'rgba(0,0,0,0.05)' : 'rgba(255,255,255, 0.1)';\n  }\n\n  setDimensions(){\n    let height = this.containerHeight * this.size;\n    let heightDif = this.containerHeight - height;\n \n    this.width = this.height = height + 'px';\n    this.marginTop =  heightDif / 2 + 'px';\n    this.renderer.setElementStyle(this.wrapper, 'height', this.containerHeight + 'px')\n  }\n\n  activate() {\n    this.el.classList.add('ease-out');\n    this.backgroundColor = this.activeBackgroundColor;\n    this.isActive = true;\n  }\n\n  deactivate(ripple:any) {\n    if(ripple) ripple.remove();\n    this.backgroundColor = this.nonactiveBackgroundColor;\n    this.isActive = false;\n    this.resetting();\n  }\n\n  resetting() {\n    this.startTimeStamp = this.endTimeStamp = 0\n    this.isTapping = this.isAnimating = false;\n  }\n\n  pressing() { this.isTapping = false }\n\n  tapping() { this.isTapping = true }\n\n  onTouchstart(e:any) {\n\n    this.resetting();\n\n    this.event = e\n    this.startTimeStamp = e.timeStamp;\n\n    if(!this.isActive){\n      this.activate();\n      this.startPressWatcher(this.interval);\n    }\n  }\n\n  startPressWatcher(interval = 400) {\n    this.pressTimeoutRunning = true;\n    this.pressTimeout = setTimeout(()=>{\n      if(!this.isTapping) this.pressHandler(interval);\n      this.pressTimeoutRunning = false\n    }, interval)\n  }\n\n  stopPressWatcher() {\n    clearTimeout(this.pressTimeout);\n    this.pressTimeoutRunning = false\n  }\n\n  onTouchend(e:any) {\n\n    if(this.pressTimeoutRunning) this.stopPressWatcher();\n\n    this.endTimeStamp = e.timeStamp;\n\n    let touchDuration = this.endTimeStamp - this.startTimeStamp;\n\n    // Handle active button & a valid touch lifecycle only\n    if(this.isActive && this.startTimeStamp !== 0 && touchDuration > 0){\n      \n      this.isActive = false;\n\n      // This is a pressing\n      if(touchDuration >= this.interval) {\n        this.pressUpHandler();\n      }\n      // This is a tapping\n      else {\n        this.tapHandler(touchDuration);\n      }\n    }\n  }\n\n  pressUpHandler() {\n    this.delay(11).then(() => {if(!this.isAnimating) this.deactivate(null)}) // wait until ripple animated\n  }\n\n  pressHandler(touchDuration:number) {\n    this.pressing();\n    this.triggerRipple(touchDuration, (ripple:any, duration:number) => {\n\n      this.delay(duration).then(() => this.btnPressed.emit(this.event))\n\n      let watcher = setInterval(() => {\n        if(!this.isAnimating && !this.isActive){\n          this.deactivate(ripple);\n          this.btnPressup.emit();\n          clearInterval(watcher);\n        }\n      }, 50)\n    });\n  }\n\n  tapHandler(touchDuration:number) {\n    this.tapping();\n    this.triggerRipple(touchDuration, (ripple:any, duration:number) => {\n      // wait ripple animation ended\n      this.delay(duration).then(() => this.removeTapRipple(ripple))\n    });\n  }\n\n  removeTapRipple(ripple:any) {\n    // wait this.el fadeout completely\n    this.delay(this.fadeDuration).then(() => {\n      this.deactivate(ripple);\n      this.btnTapped.emit();\n    })\n  }\n\n  triggerRipple(dTouch:number ,callback:any) {\n  \n    let btn = this.el;\n    let rect = btn.getBoundingClientRect();\n    \n    let ripple = <HTMLElement>btn.querySelector('.ripple');\n\n    if(!ripple){\n      \n      ripple = document.createElement('span');\n      ripple.className = 'ripple';\n\n      ripple.style.height = ripple.style.width = Math.max(rect.width, rect.height) + 'px';\n      ripple.style.position = 'absolute';\n      ripple.style.borderRadius = '100%';\n      ripple.style.transform = 'scale(0.01)';\n      ripple.style.display = 'block';\n      ripple.style.pointerEvents = 'none';\n\n      this.el.appendChild(ripple);\n    }\n\n    let y = this.event.changedTouches[0].pageY;\n    let x = this.event.changedTouches[0].pageX;\n\n    let center = {\n      x: rect.left + (rect.width/2),\n      y: rect.top + (rect.height/2),\n    };\n\n    let tx = center.x-x;\n    let ty = center.y-y;\n\n    let top =  y - rect.top - ripple.offsetHeight / 2 - document.body.scrollTop;\n    let left = x - rect.left - ripple.offsetWidth / 2 - document.body.scrollLeft;\n\n    ripple.style.top = top + 'px';\n    ripple.style.left = left + 'px';\n\n    let bg = this.rippleBackground;\n    ripple.style.background =  bg + ' radial-gradient(circle, transparent 1%, '+ bg +' 1%) 50% no-repeat';\n\n    let duration = dTouch < this.interval ? dTouch : this.interval;\n    ripple.style.transition = 'all '+ duration +'ms ease-in-out';\n    \n    // Trigger ripple animation\n    this.delay(10).then(() => {\n      ripple.style.transform = 'scale(1) translate3d('+ tx +'px,'+ ty + 'px, 0)';\n      this.isAnimating = true;\n    })\n\n    // Ripple animation end\n    this.delay(duration).then(() => this.isAnimating = false )\n\n    if (typeof callback === \"function\") {\n      callback(ripple, duration);\n    }\n\n    return false;\n  }\n\n}"]}